{% extends "layout.html" %}

{% block title %} | {{ question['title'] }}{% endblock %}
{% block buttons %}
<a href="{{ url_for('add_answer', question_id=question["id"]) }}" id="myButton">Add new answer</a>
{% endblock %}
{% block content %}
<div>
    <div class="post">
        <div class="title">
                <h3>{{ question["title"] }}</h3>
        </div>
        <div class="edit">
            <a href="{{ url_for('edit_question', question_id=question['id']) }}" id="myButton">Edit</a>
        </div>
        <div class="delete">
            <a href="{{ url_for('delete_question', question_id=question['id']) }}" id="myButton">Delete</a>
        </div>
        <div class="vote-bar">
            <strong>
                <a href="{{ url_for('vote_question', question_id=question['id'], vote='up') }}">▲</a>
                <br>{{ question["vote_number"] }}<br>
                <a href="{{ url_for('vote_question', question_id=question['id'], vote='down') }}">▼</a>
            </strong>
        </div>
        <div class="message">
            <p>{{ question["message"] }}</p><br><br>
            {% if question["image"] %}
                <img src="{{ url_for("static", filename="images/"+question["image"]) }}" alt="" width="500">
            {% endif %}
        </div>
        <div class="post-footer">
            <div class="stat-box">submitted:</div>
            <div class="stat">{{ question["submission_time"] }}</div>
            <div class="stat-box">views:</div>
            <div class="stat-box">{{ question["view_number"] }}</div>
        </div>
    {% if tags %}
        <div class="tags">
            {% for tag in tags %}
                <a id="tag-box" href="{{ url_for('get_tagged_questions', tag=tag.name) }}">{{ tag.name }}</a>
            {% endfor %}
        </div>
    {% endif %}
    {% with full_route=url_for('add_comment_to_question', question_id=question['id']), to_comment=question, id_type="question_id" %}
        {% include "comment_table.html" %}
    {% endwith %}
    </table>
</div>
<div class="answers" id="answer">
{% for answer in answers %}
<table class="centered">
    <tr>
        <td rowspan="2" class="voting">
            <strong>
                <a href="{{ url_for('vote_answer', answer_id=answer['id'], vote='up') }}">▲</a><br>
                {{ answer["vote_number"] }}<br>
                <a href="{{ url_for('vote_answer', answer_id=answer['id'], vote='down') }}">▼</a>
            </strong>
        </td>
        <td colspan="3">
            <p class="linebreak">{{ answer["message"] }}</p><br>
            {% if answer["image"] %}
                    <img src="{{ url_for("static", filename="images/"+answer["image"]) }}" alt="" width="500">
            {% endif %}
        </td>
    </tr>
    <tr class="left_text stats">
        <td class="submit_time">submitted: {{ answer["submission_time"] }}</td>
        <td class="edit-delete">
        <a href="{{ url_for('update_answer', question_id=answer['question_id'], answer_id=answer['id']) }}" id="myButton">Edit</a>
        </td>
        <td class="edit-delete">
        <a href="{{ url_for('delete_answer', question_id=answer['question_id'], answer_id=answer['id']) }}" id="myButton">Delete</a>
        </td>
    </tr>
    {% with full_route=url_for('add_comment_to_answer', answer_id=answer['id']), to_comment=answer, id_type="answer_id" %}
        {% include "comment_table.html" %}
    {% endwith %}
</table>
<br>
{% endfor %}
</div>
{% endblock %}